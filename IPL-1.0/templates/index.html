<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cricket Scorecard Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f4f6f9; /* Updated */
            padding-top: 20px;
            padding-bottom: 20px;
            color: #343a40; /* Default text color for body */
        }
        .container {
            max-width: 800px;
            margin: auto;
            background-color: #ffffff; /* Kept as white */
            box-shadow: 0 0 15px rgba(0,0,0,0.15); /* Slightly enhanced shadow */
            padding: 20px;
            border-radius: 8px;
        }
        .team-selection {
            margin-bottom: 20px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #e9ecef; /* Kept or can be slightly lightened if needed */
        }
        h2 {
            text-align: center;
            color: #343a40; /* Updated */
        }
        h3 { /* General h3, including the main match title */
            text-align: center;
            color: #343a40; /* Updated */
            margin-bottom: 15px;
            /* For scorecard_data.match_teams_title, consider adding a specific class if more styling is needed than just color,
               or target it more specifically if possible. For now, this global h3 change will apply.
               A bottom border could be: border-bottom: 1px solid #dee2e6; padding-bottom: 10px; */
        }
        h4 { /* Innings titles, Toss/Result sub-titles */
            text-align: center;
            color: #343a40; /* Updated */
            margin-top: 20px;
            margin-bottom: 10px;
        }
        h5 { /* Bowling team titles */
            color: #343a40; /* Updated */
            margin-top: 15px;
            margin-bottom: 5px;
            text-align: left; /* Ensuring bowling titles are left-aligned */
        }
        label {
            margin-right: 10px;
        }
        select {
            padding: 10px;
            margin-right: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            min-width: 100px;
        }
        button {
            padding: 10px 15px;
            margin-right: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .sim-button {
            margin-left: 10px;
            margin-right: 10px;
            padding: 10px 20px;
        }
        button:disabled {
            background-color: #cccccc;
            color: #666666;
            cursor: not-allowed;
            opacity: 0.5;
        }
        .scorecard-section {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #fff;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #4a6572; /* Updated */
            color: #ffffff; /* Updated */
            border-bottom: 2px solid #34495e; /* Updated */
        }
        tbody tr:nth-child(odd) {
            background-color: #f9f9f9;
        }
        tbody tr:hover {
            background-color: #f1f1f1;
        }
        .hidden {
            display: none;
        }
        .match-summary.toss-summary { /* More specific selector for toss if needed, or general .match-summary */
            background-color: #e9ecef; /* Updated for Toss */
            border: 1px solid #ced4da; /* Updated for Toss */
            color: #495057; /* Updated for Toss */
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
        }
        .match-summary h4 { /* Applies to h4 within .match-summary (like "Toss", "Result") */
            text-align: left;
            margin-top: 0;
            color: inherit; /* Inherits color from .match-summary or .result-highlight */
        }
        .result-highlight { /* This is for the main match result message */
            margin-top: 20px;
            background-color: #d4edda; /* Updated for Result */
            color: #155724;    /* Updated for Result */
            border: 1px solid #c3e6cb;  /* Updated for Result */
            padding: 15px;
            text-align: center;
            border-radius: 5px;
        }
        .result-highlight p strong {
            font-size: 1.1em;
            font-weight: bold;
        }
        hr {
            border: 0;
            height: 1px;
            background: #ddd;
            margin-top: 25px;
            margin-bottom: 25px;
        }
        p strong { /* Applies to Total score line and winner message strong tag */
            font-size: 1.05em; /* Kept as is, can be increased if needed for Total */
        }
        /* Style for the paragraph containing the total score */
        .scorecard-section > p > strong { /* Targets <strong> inside <p> directly under .scorecard-section */
             font-weight: 600; /* Slightly bolder if needed */
        }
        .commentary-section {
            margin-top: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .commentary-header {
            background-color: #546e7a; /* Updated */
            color: white;
            padding: 10px;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
        }
        .commentary-header:hover {
            background-color: #455a64; /* Slightly darker shade for hover */
        }
        .commentary-content {
            padding: 10px;
            border-top: 1px solid #ddd;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        .commentary-content p {
            margin: 5px 0;
            font-size: 0.9em;
            border-bottom: 1px dashed #eee;
            padding-bottom: 5px;
        }
        .commentary-content p:last-child {
            border-bottom: none;
        }

        /* Team Grid Styles START */
        .team-grid-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
            padding: 10px;
        }
        .team-box {
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease, border-color 0.3s ease; /* Added border-color transition */
            border-radius: 10px;
            background-color: #fff; /* Default background */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .team-box:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }
        .team-logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: contain;
            margin-bottom: 10px;
            background-color: #ffffff;
            padding: 5px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .team-name {
            font-weight: bold;
            font-size: 0.9em;
            color: #333; /* Default text color */
            margin-top: 5px;
            transition: color 0.3s ease; /* Added color transition */
        }
        .team-box.selected-team1, .team-box.selected-team2 {
            /* Enhanced shadow for selection, specific background/border set by JS */
            box-shadow: 0 0 15px rgba(0, 100, 255, 0.6), 0 0 0 3px rgba(0, 100, 255, 0.8);
        }
        /* Team Grid Styles END */

        /* Toss Animation Styles START */
        #toss-animation-container {
            text-align: center;
            padding: 20px;
            border: 1px solid #ccc;
            margin-bottom: 20px;
            background-color: #f9f9f9;
            border-radius: 8px;
        }
        #coin {
            width: 80px; height: 80px; background-color: #FFD700; border: 2px solid #DAA520;
            border-radius: 50%; margin: 0 auto 20px auto; display: flex;
            justify-content: center; align-items: center; font-size: 1.1em;
            color: #4a4a4a; position: relative; transform-style: preserve-3d;
        }
        .coin-flipping { animation: flip-animation 0.25s linear infinite; }
        .coin-face { position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; backface-visibility: hidden; }
        .coin-tails { transform: rotateY(180deg); }
        @keyframes flip-animation { 0% { transform: rotateY(0deg); } 100% { transform: rotateY(360deg); } }
        #toss-text-announcement { font-size: 1.2em; min-height: 2.5em; color: #333; }
        /* Toss Animation Styles END */

        .floating-action-button {
            position: fixed;
            bottom: 60px; /* Adjusted for approximate centering of 80px button with 50-100px margin */
            right: 60px;  /* Adjusted */
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #007bff; /* Example color */
            color: white;
            text-align: center;
            font-size: 13px; /* Small font for longer text */
            line-height: 1.3; /* Adjust for text fitting */
            border: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 5px; /* Add padding to prevent text overflow */
            z-index: 1000; /* Ensure it's above other content */
        }
        .floating-action-button:hover {
            background-color: #0056b3; /* Darker shade on hover */
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Cricket Scorecard Generator</h2>

        {% if not scorecard_data %}
            <div class="team-selection">
                <h3>Select Teams (Click to Select)</h3>
                <form id="scorecardForm" action="{{ url_for('generate_scorecard') }}" method="post">
                    <input type="hidden" name="selectedTeam1" id="selectedTeam1">
                    <input type="hidden" name="selectedTeam2" id="selectedTeam2">

                    <div class="team-grid-container">
                        {% for team_code, team_data in teams.items() %}
                        <div class="team-box"
                             data-team-code="{{ team_code }}"
                             data-full-name="{{ team_data.fullName }}"
                             data-primary-color="{{ team_data.colorPrimary }}"
                             data-secondary-color="{{ team_data.colorSecondary }}"
                             {% if team_data.hoverColor %}data-hover-color="{{ team_data.hoverColor }}"{% endif %}
                             style="border: 2px solid {{ team_data.colorPrimary }};">
                            <img src="{{ team_data.logo }}" alt="{{ team_data.fullName }} Logo" class="team-logo">
                            <p class="team-name">{{ team_data.name.upper() }}</p>
                        </div>
                        {% endfor %}
                    </div>

                    <div class="simulation-options" style="text-align: center; margin-top: 20px; display: none;">
                        <button type="submit" name="simulation_type" value="direct" id="directSimButton" class="sim-button">Direct Scorecard</button>
                        <button type="submit" name="simulation_type" value="ball_by_ball" id="ballByBallSimButton" class="sim-button">Ball-by-Ball Simulation</button>
                    </div>
                </form>
            </div>
        {% else %}
            <div id="play-new-game-button-container"> <!-- Inline styles removed -->
                <form action="{{ url_for('index') }}" method="get">
                    <button type="submit" class="floating-action-button">Simulate Another Match</button>
                </form>
            </div>
        {% endif %}

        <div id="toss-animation-container" style="display: none;">
            <h3 id="toss-sequence-title" style="margin-bottom: 15px;">Coin Toss</h3>
            <div id="coin"><span class="coin-face coin-heads">H</span><span class="coin-face coin-tails" style="display: none;">T</span></div>
            <p id="toss-text-announcement" style="font-size: 1.2em; min-height: 2.5em;"></p>
        </div>

        {% if scorecard_data %}
        <div class="scorecard-section">
            <h3>{{ scorecard_data.match_teams_title }}</h3>
            {% if scorecard_data.tossMsg %}
            <div class="match-summary toss-summary"><h4>Toss</h4><p>{{ scorecard_data.tossMsg }}</p></div> <!-- toss-summary class added to allow specific styling if needed -->
            {% endif %}
            {% if scorecard_data.innings1BatTeam %}
            <h4>Innings 1: {{ scorecard_data.innings1BatTeam.upper() }}</h4>
            <table><thead><tr><th>Player</th><th>Runs</th><th>Balls</th><th>SR</th><th>How Out</th></tr></thead><tbody>{% for player, stats in scorecard_data.innings1Battracker.items() %}<tr><td>{{ player }}</td><td>{{ stats.runs }}</td><td>{{ stats.balls }}</td><td>{{ '%.2f'|format((stats.runs / stats.balls * 100) if stats.balls > 0 else 0) }}</td><td>{{ stats.how_out }}</td></tr>{% endfor %}</tbody></table>
            <p><strong>Total: {{ scorecard_data.innings1Runs }}/{{ scorecard_data.innings1Wickets }} ({{ (scorecard_data.innings1Balls // 6) if scorecard_data.innings1Balls else 0 }}.{{ scorecard_data.innings1Balls % 6 if scorecard_data.innings1Balls else 0 }} Overs)</strong></p>
            <h5>Bowling: {{ scorecard_data.innings2BatTeam.upper() }}</h5>
            <table><thead><tr><th>Player</th><th>Overs</th><th>Runs</th><th>Wickets</th><th>Economy</th></tr></thead><tbody>{% for player, stats in scorecard_data.innings1Bowltracker.items() %}<tr><td>{{ player }}</td><td>{{ (stats.balls // 6) if stats.balls else 0 }}.{{ stats.balls % 6 if stats.balls else 0 }}</td><td>{{ stats.runs }}</td><td>{{ stats.wickets }}</td><td>{{ '%.2f'|format((stats.runs / (stats.balls / 6)) if stats.balls > 0 else 0) }}</td></tr>{% endfor %}</tbody></table>
            {% endif %}
            {% if scorecard_data.innings1Log %}
            <div class="commentary-section"><div class="commentary-header" onclick="toggleCommentary('commentary1')">Innings 1: Over-by-Over Log &#9662;</div><div class="commentary-content" id="commentary1">{% for log_entry in scorecard_data.innings1Log %}<p>{{ log_entry.event }}</p>{% endfor %}</div></div>
            {% endif %}
            <hr>
            {% if scorecard_data.innings2BatTeam %}
            <h4>Innings 2: {{ scorecard_data.innings2BatTeam.upper() }}</h4>
            <table><thead><tr><th>Player</th><th>Runs</th><th>Balls</th><th>SR</th><th>How Out</th></tr></thead><tbody>{% for player, stats in scorecard_data.innings2Battracker.items() %}<tr><td>{{ player }}</td><td>{{ stats.runs }}</td><td>{{ stats.balls }}</td><td>{{ '%.2f'|format((stats.runs / stats.balls * 100) if stats.balls > 0 else 0) }}</td><td>{{ stats.how_out }}</td></tr>{% endfor %}</tbody></table>
            <p><strong>Total: {{ scorecard_data.innings2Runs }}/{{ scorecard_data.innings2Wickets }} ({{ (scorecard_data.innings2Balls // 6) if scorecard_data.innings2Balls else 0 }}.{{ scorecard_data.innings2Balls % 6 if scorecard_data.innings2Balls else 0 }} Overs)</strong></p>
            <h5>Bowling: {{ scorecard_data.innings1BatTeam.upper() }}</h5>
            <table><thead><tr><th>Player</th><th>Overs</th><th>Runs</th><th>Wickets</th><th>Economy</th></tr></thead><tbody>{% for player, stats in scorecard_data.innings2Bowltracker.items() %}<tr><td>{{ player }}</td><td>{{ (stats.balls // 6) if stats.balls else 0 }}.{{ stats.balls % 6 if stats.balls else 0 }}</td><td>{{ stats.runs }}</td><td>{{ stats.wickets }}</td><td>{{ '%.2f'|format((stats.runs / (stats.balls / 6)) if stats.balls > 0 else 0) }}</td></tr>{% endfor %}</tbody></table>
            {% endif %}
            {% if scorecard_data.innings2Log %}
            <div class="commentary-section"><div class="commentary-header" onclick="toggleCommentary('commentary2')">Innings 2: Over-by-Over Log &#9662;</div><div class="commentary-content" id="commentary2">{% for log_entry in scorecard_data.innings2Log %}<p>{{ log_entry.event }}</p>{% endfor %}</div></div>
            {% endif %}
            {% if scorecard_data.winMsg %}
            <div class="match-summary result-highlight"><h4>Result</h4><p><strong>{{ scorecard_data.winMsg }}</strong></p></div> <!-- result-highlight class is already specific -->
            {% endif %}
        </div>
        {% endif %}
    </div>
    <script>
        function toggleCommentary(commentaryId) {
            var content = document.getElementById(commentaryId);
            var header = content.previousElementSibling;
            if (content.style.display === "none" || content.style.display === "") {
                content.style.display = "block";
                header.innerHTML = header.innerHTML.replace("▼", "▲");
            } else {
                content.style.display = "none";
                header.innerHTML = header.innerHTML.replace("▲", "▼");
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            const scorecardData = {{ scorecard_data | tojson | safe if scorecard_data else 'null' }};
            const teamsData = {{ teams | tojson | safe }};

            if (scorecardData && scorecardData.tossMsg && !sessionStorage.getItem('tossAnimationShownForMatch_' + scorecardData.team1 + '_' + scorecardData.team2 + '_' + scorecardData.tossMsg)) {
                runTossAnimation();
            }

            function runTossAnimation() {
                const tossContainer = document.getElementById('toss-animation-container');
                const coinEl = document.getElementById('coin');
                const tossTextEl = document.getElementById('toss-text-announcement');
                const headsFace = coinEl.querySelector('.coin-heads');
                const tailsFace = coinEl.querySelector('.coin-tails');
                const scorecardSection = document.querySelector('.scorecard-section');
                const playNewGameButtonContainer = document.getElementById('play-new-game-button-container');

                if (!tossContainer || !coinEl || !tossTextEl || !scorecardSection || (scorecardData && !playNewGameButtonContainer) ) { // Check scorecardData for playNewGameButtonContainer
                    console.error("Toss animation elements or related containers not found!");
                    if (scorecardSection) scorecardSection.style.display = 'block';
                    if (playNewGameButtonContainer) playNewGameButtonContainer.style.display = 'block';
                    return;
                }

                if (scorecardSection) scorecardSection.style.display = 'none';
                if (playNewGameButtonContainer) playNewGameButtonContainer.style.display = 'none';
                tossContainer.style.display = 'block';

                const tossMsg = scorecardData.tossMsg;
                const parts = tossMsg.split(" won the toss and chose to ");
                const winnerCode = parts[0].trim();
                const team1Code = scorecardData.team1;
                const team2Code = scorecardData.team2;
                const winnerData = teamsData[winnerCode.toLowerCase()];
                const winnerName = winnerData ? winnerData.fullName || winnerCode : winnerCode;
                const opponentCode = winnerCode.toLowerCase() === team1Code.toLowerCase() ? team2Code : team1Code;
                const opponentData = teamsData[opponentCode.toLowerCase()];
                const callingTeamName = opponentData ? opponentData.fullName || opponentCode : "Opponent";
                const call = Math.random() < 0.5 ? "Heads" : "Tails";
                const outcome = Math.random() < 0.5 ? "Heads" : "Tails";
                let sequenceStep = 0;
                const steps = [
                    () => { tossTextEl.textContent = `${callingTeamName} calls ${call}!`; coinEl.className = 'coin'; headsFace.style.display = 'block'; tailsFace.style.display = 'none';},
                    () => { tossTextEl.textContent = "Coin is spinning..."; coinEl.classList.add('coin-flipping'); },
                    () => { tossTextEl.textContent = "Coin is spinning..."; },
                    () => {
                        coinEl.classList.remove('coin-flipping');
                        headsFace.style.display = outcome === 'Heads' ? 'block' : 'none';
                        tailsFace.style.display = outcome === 'Tails' ? 'block' : 'none';
                        tossTextEl.textContent = `It's ${outcome}!`;
                    },
                    () => { tossTextEl.innerHTML = `<strong>${tossMsg}</strong>`; },
                    () => {
                        tossContainer.style.display = 'none';
                        if (scorecardSection) scorecardSection.style.display = 'block';
                        if (playNewGameButtonContainer) playNewGameButtonContainer.style.display = 'block';
                        sessionStorage.setItem('tossAnimationShownForMatch_' + team1Code + '_' + team2Code + '_' + tossMsg, 'true');
                    }
                ];
                function nextStep() {
                    if (sequenceStep < steps.length) {
                        steps[sequenceStep](); sequenceStep++;
                        let delay = (sequenceStep === 2 || sequenceStep === 3) ? 2000 : 1500;
                        if (sequenceStep === steps.length -1) delay = 2500;
                        setTimeout(nextStep, delay);
                    }
                }
                nextStep();
            }

            const scorecardDataPresent = {{ scorecard_data is not none | tojson }};
            if (!scorecardDataPresent) {
                const teamBoxes = document.querySelectorAll('.team-box');
                const selectedTeam1Input = document.getElementById('selectedTeam1');
                const selectedTeam2Input = document.getElementById('selectedTeam2');
                const simulationOptionsDiv = document.querySelector('.simulation-options');
                let team1 = null;
                let team2 = null;

                teamBoxes.forEach(box => {
                    const primaryColor = box.dataset.primaryColor;
                    const hoverColor = box.dataset.hoverColor;
                    const teamNameP = box.querySelector('.team-name');
                    // Store original border color from inline style (which is primaryColor)
                    box.dataset.originalBorderColor = box.style.borderColor || primaryColor;
                    const originalTextColor = teamNameP.style.color || '#333'; // Default text color from CSS

                    function getContrastYIQ(hexcolor){
                        if (!hexcolor || !hexcolor.startsWith('#')) return '#333';
                        hexcolor = hexcolor.replace("#", "");
                        var r = parseInt(hexcolor.substr(0,2),16);
                        var g = parseInt(hexcolor.substr(2,2),16);
                        var b = parseInt(hexcolor.substr(4,2),16);
                        var yiq = ((r*299)+(g*587)+(b*114))/1000;
                        return (yiq >= 128) ? '#333' : 'white';
                    }

                    box.addEventListener('mouseenter', function () {
                        if (!this.classList.contains('selected-team1') && !this.classList.contains('selected-team2')) {
                            const effectiveHoverColor = this.dataset.hoverColor || this.dataset.primaryColor;
                            this.style.backgroundColor = effectiveHoverColor;
                            this.style.borderColor = effectiveHoverColor; // Update border color on hover
                            teamNameP.style.color = getContrastYIQ(effectiveHoverColor);
                        }
                    });

                    box.addEventListener('mouseleave', function () {
                        if (!this.classList.contains('selected-team1') && !this.classList.contains('selected-team2')) {
                            this.style.backgroundColor = ''; // Revert to default CSS background
                            this.style.borderColor = this.dataset.originalBorderColor; // Revert to original border
                            teamNameP.style.color = originalTextColor; // Revert to original text color
                        }
                    });

                    box.addEventListener('click', function () {
                        const teamCode = this.dataset.teamCode;
                        // Existing selection logic (condensed for brevity in this thought block)
                        if (this.classList.contains('selected-team1')) {
                            team1 = null; selectedTeam1Input.value = ''; this.classList.remove('selected-team1');
                        } else if (this.classList.contains('selected-team2')) {
                            team2 = null; selectedTeam2Input.value = ''; this.classList.remove('selected-team2');
                        } else {
                            if (!team1 && teamCode !== team2) {
                                team1 = teamCode; selectedTeam1Input.value = team1; this.classList.add('selected-team1');
                            } else if (!team2 && teamCode !== team1) {
                                team2 = teamCode; selectedTeam2Input.value = team2; this.classList.add('selected-team2');
                            } else if (team1 && team2) {
                                const prevTeam1Box = document.querySelector('.team-box.selected-team1');
                                if(prevTeam1Box) { prevTeam1Box.classList.remove('selected-team1');}
                                team1 = teamCode; selectedTeam1Input.value = team1; this.classList.add('selected-team1');
                                if (team1 === team2) { // If new team1 is same as old team2, clear team2
                                    const prevTeam2Box = document.querySelector('.team-box.selected-team2');
                                    if(prevTeam2Box) { prevTeam2Box.classList.remove('selected-team2');}
                                    team2 = null; selectedTeam2Input.value = '';
                                }
                            }
                        }

                        // Restyle ALL boxes based on their current selection state
                        teamBoxes.forEach(innerBox => {
                            const iPrimaryColor = innerBox.dataset.primaryColor;
                            const iHoverColor = innerBox.dataset.hoverColor;
                            const iEffectiveHoverColor = iHoverColor || iPrimaryColor;
                            const iOriginalBorderColor = innerBox.dataset.originalBorderColor || iPrimaryColor;
                            const innerTeamNameP = innerBox.querySelector('.team-name');

                            if (innerBox.classList.contains('selected-team1') || innerBox.classList.contains('selected-team2')) {
                                innerBox.style.backgroundColor = iEffectiveHoverColor;
                                innerBox.style.borderColor = iEffectiveHoverColor;
                                innerTeamNameP.style.color = getContrastYIQ(iEffectiveHoverColor);
                            } else {
                                innerBox.style.backgroundColor = '';
                                innerBox.style.borderColor = iOriginalBorderColor;
                                innerTeamNameP.style.color = originalTextColor; // Revert to original for non-selected
                            }
                        });
                        validateSelections();
                    });
                });

                function validateSelections() {
                    if (team1 && team2 && team1 !== team2) {
                        if(simulationOptionsDiv) simulationOptionsDiv.style.display = 'block';
                    } else {
                        if(simulationOptionsDiv) simulationOptionsDiv.style.display = 'none';
                    }
                }
                validateSelections();
                const scorecardForm = document.getElementById('scorecardForm');
                if (scorecardForm) {
                    scorecardForm.addEventListener('submit', function(event) {
                        if (!selectedTeam1Input.value || !selectedTeam2Input.value) {
                            event.preventDefault(); alert('Please select two teams to generate the scorecard.');
                        } else if (selectedTeam1Input.value === selectedTeam2Input.value) {
                            event.preventDefault(); alert('Please select two different teams.');
                        }
                    });
                }
            }
        });
    </script>
</body>
</html>
